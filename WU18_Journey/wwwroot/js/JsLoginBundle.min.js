var loginAngularPreDashboard=angular.module("loginAngularAppPreDashboard",["ngRoute","ngCookies"]);loginAngularPreDashboard.config(function(n){n.when("/register/",{templateUrl:"/templates/register.html",controller:"journeyLoginController"})});loginAngularPreDashboard.controller("journeyLoginController",function(n,t,i,r,u){var f=u.get("loggedInUser");f&&(i.loggedInUser=JSON.parse(f));console.log("$rootScope.loggedInUser ",i.loggedInUser);n.logInJsAction=function(){var r=n.loginEmail,u=n.loginPassword,i,f;console.log("loginEmail: "+r);console.log("loginPassword: "+u);i={Email:r,Password:u};console.log("loginPostObject: "+i);f="/api/Users/";t.post(f,i).then(function(t){console.log("SuccessfullCallback response: ",t);var i=t.data.email,r=t.data.userId;console.log("errorCallback response userEmail: ",i);console.log("errorCallback response userId: ",r);n.userEmail=i;i=globalUserEmail;r=globarUserId},function(n){console.log("errorCallback response for login: ",n)})};n.ClickLoginTest=function(){var f=n.loginEmail,e=n.loginPassword,o;console.log(f);console.log(e);n.registeredSuccessfully=Boolean(JSON.parse(!1));n.fieldsNotValid=Boolean(JSON.parse(!1));n.fieldsNotFilled=Boolean(JSON.parse(!1));(f==""||e=="")&&(n.fieldsNotFilled=Boolean(JSON.parse(!0)));o={email:f,password:e};t.post("/token",o).then(function(n){i.token=n.data.token;console.log("response: ",n);t.get("/api/User",{headers:{Authorization:"Bearer "+i.token}}).then(function(n){var e=n,f,o,s;console.log("token: ",e);let t={};t.Email=e.data.email;t.CookieWithToken=i.token;f=new Date;o=new Date(f.getFullYear()+1,f.getMonth(),f.getDate());u.put("loggedInUser",JSON.stringify(t),{expires:o});console.log("$rootScope.loggedInUser ",t);s="dashboard.html";r.location.href=s},function(n){var t=n;console.log("error: ",t)})},function(){n.fieldsNotValid=Boolean(JSON.parse(!0))})};n.registeredSuccessfully=Boolean(JSON.parse(!1));n.registerJsAction=function(){let i={email:n.registerEmail,password:n.registerPassword};t.post("/register",i).then(function(t){t.data.succeeded?n.registeredSuccessfully=Boolean(JSON.parse(!0)):n.fieldsNotValid=Boolean(JSON.parse(!0));console.log(t)},function(){})}});